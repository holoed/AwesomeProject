// Generated by psc-make version 0.6.9.5
"use strict";
var Control_Monad_Aff = require("Control.Monad.Aff");
var Prelude = require("Prelude");
var Test_Spec_Console = require("Test.Spec.Console");
var Debug_Trace = require("Debug.Trace");
var Data_Foldable = require("Data.Foldable");
var Data_Array = require("Data.Array");
var Control_Monad = require("Control.Monad");
var Test_Spec_Summary = require("Test.Spec.Summary");
var Test_Spec = require("Test.Spec");
var Control_Monad_Eff = require("Control.Monad.Eff");
var Control_Monad_Extras = require("Control.Monad.Extras");
var Test_Spec_Reporter = require("Test.Spec.Reporter");
var Control_Monad_Eff_Exception = require("Control.Monad.Eff.Exception");

  function exit(code) {
    return function() {
      process.exit(code);
    };
  }
  ;
var runNode = function (rs) {
    return function (spec) {
        return Control_Monad_Aff.runAff(function (err) {
            return function __do() {
                Test_Spec_Console.withAttrs([ 31 ])(Debug_Trace.print(Control_Monad_Eff_Exception.showError)(err))();
                return exit(1)();
            };
        })(function (results) {
            return function __do() {
                Data_Foldable.sequence_(Control_Monad_Eff.applicativeEff)(Data_Foldable.foldableArray)(Data_Array.map(function (f) {
                    return f(results);
                })(rs))();
                return Control_Monad.when(Control_Monad_Eff.monadEff)(!Test_Spec_Summary.successful(results))(exit(1))();
            };
        })(Test_Spec.collect(spec));
    };
};
module.exports = {
    runNode: runNode
};
